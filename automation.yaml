- alias: Turn on front entry
  initial_state: true
  trigger:
    platform: state
    entity_id: binary_sensor.front_door_sensor_sensor
    to: 'on'
  condition:
  - condition: template
    value_template: "{%- set hour=(as_timestamp(now())|timestamp_custom(\"%H\"))|int\
      \ -%} {%- if hour >= 19 and hour  <=  6 -%}\n  true\n{%- else -%}\n  false\n\
      {%- endif %}"
  action:
  - service: switch.turn_on
    entity_id: switch.front_entry_light_switch
  - delay:
      seconds: 30
  - service: switch.turn_off
    entity_id: switch.front_entry_light_switch
  id: b265b2421b044e379a6287f2949b933e
- alias: Timed 4pm
  initial_state: true
  trigger:
  - platform: time
    at: '16:00:00'
  action:
  - service: light.turn_on
    entity_id:
    - light.ge_12724_3way_dimmer_switch_level
  id: 9bde1d63a8444bd1abe6f0a950155a60
- alias: Charlie is home
  trigger:
    platform: state
    entity_id: group.charlie
    to: home
  action:
    service: notify.notify
    data:
      message: Charlie is Home
  id: f79f903e518142d9ae42e7c99c37b551
- alias: Charlie is away
  trigger:
    platform: state
    entity_id: group.charlie
    to: not_home
  action:
    service: notify.notify
    data:
      message: charlie is Away
  id: 1ca7ab1079c74616903a740f0c9d11a7
- alias: Update Available Notifications
  trigger:
    platform: state
    entity_id: updater.updater
  action:
    service: persistent_notification.create
    data:
      title: New Update
      message: Update for Home Assistant is available.
  id: 8ad3e8bedbca4afa875715a2b6a03170
- alias: Z-Wave network is complete
  initial_state: true
  trigger:
    platform: event
    event_type: zwave.network_ready
  action:
    service: notify.ios_torn8o
    data:
      message: Z Wave Network is up
  id: 98cc05dc2f01474b9c9a1c438604718b
- alias: TV Lights on
  initial_state: true
  trigger:
  - platform: state
    entity_id: sensor.vizio_tv
    to: Online
  action:
  - service: light.turn_on
    entity_id: light.tv_room_light_level
  id: dccd0c6c8f1f443aadc0f2a4271377c9
- alias: TV Lights off
  initial_state: true
  trigger:
    platform: state
    entity_id: sensor.vizio_tv
    to: Offline
  action:
    service: light.turn_off
    entity_id: light.tv_room_light_level
  id: 81eb0c30035946e985fb65835b6125d8
- alias: Turn ferina tree
  initial_state: true
  hide_entity: false
  trigger:
    platform: sun
    event: sunset
    offset: -00:00:20
  action:
    service: switch.turn_on
    entity_id: switch.ferina_tree
  id: 3e2406c8338e46139505d98d6b18626c
- alias: Turn deck led off at sunrise
  initial_state: true
  trigger:
    platform: sun
    event: sunrise
    offset: -04:33:00
  action:
    service: switch.turn_on
    entity_id: switch.ferina_tree
  id: 1535ba655906430bb509b032b51383a7
- alias: Turn accent lights led On At Sunset
  initial_state: true
  hide_entity: false
  trigger:
    platform: sun
    event: sunset
    offset: -00:00:10
  action:
    service: light.turn_on
    entity_id: light.accent_interior_lights
  id: efd253d4694e44acb256842d9ca95ca5
- alias: Turn accent lights off 12am
  initial_state: true
  trigger:
  - platform: time
    at: '00:30:00'
  action:
    service: light.turn_off
    entity_id: light.accent_interior_lights
  id: f7d328dcb4ca40d4bb9d321e1e6402fd
- alias: Trash Pickup Day Changed
  initial_state: true
  trigger:
    platform: state
    entity_id: input_select.trash_pickup_day
  action:
    - service: mqtt.publish
      data_template:
        topic: "/home/trashpickupday"
        retain: true
        payload: '{{ states.input_select.trash_pickup_day.state }}'
- alias: Recycle Pickup Day Changed
  initial_state: true
  trigger:
    platform: state
    entity_id: input_select.recycle_pickup_day
  action:
    - service: mqtt.publish
      data_template:
        topic: "/home/recyclepickupday"
        retain: true
        payload: '{{ states.input_select.recycle_pickup_day.state }}'

- alias: Recycle Pickup Week Changed
  initial_state: true
  trigger:
    platform: state
    entity_id: input_select.recycle_pickup_week
  action:
    - service: mqtt.publish
      data_template:
        topic: "/home/recyclepickupweek"
        retain: true
        payload: '{{ states.input_select.recycle_pickup_week.state }}'

- alias: Restore Trash Recycle Settings on Startup
  initial_state: true
  trigger:
    platform: homeassistant
    event: start
  action:
    - delay:
        minutes: 1
    - service: input_select.select_option
      data_template:
        entity_id: input_select.trash_pickup_day
        option: "{{states.sensor.trash_pickup_day.state}}"
    - service: input_select.select_option
      data_template:
        entity_id: input_select.recycle_pickup_day
        option: "{{states.sensor.recycle_pickup_day.state}}"
    - service: input_select.select_option
      data_template:
        entity_id: input_select.recycle_pickup_week
        option: "{{states.sensor.recycle_pickup_week.state}}"

###############################################################################
#  Reminder code - Reminds 5 times every hour starting 4 PM
#  Conditions: Only notifies when someone is at home
###############################################################################
- alias: Trash and Recycle Pickup Reminder
  initial_state: true
  trigger:
    - platform: time
      at: '16:00:00'
    - platform: time
      at: '17:00:00'
    - platform: time
      at: '18:00:00'
    - platform: time
      at: '19:00:00'
    - platform: time
      at: '20:00:00'
    - platform: time
      at: '21:00:00'
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: '{{ states.input_boolean.trash_reminders.state == "on" }}'
    - condition: or
      conditions:
        - condition: state
          entity_id: calendar.trash_and_recycle
          state: 'on'
        - condition: state
          entity_id: sensor.recycle_day
          state: 'yes'
  action:
    - service: notify.ios_torn8o
      data_template:
        title: "Put Trash Out Trash Pickup Tomorrow!"
        message: "Please leave Trash bins out tonight!"
        data:
          push:
            badge: 0
            category: "trash_recycle"

    - service: script.notify_me
      data_template:
        message: >
          {% if states.sensor.trash_and_recycle.state == "Put Trash Out" %}
           Tomorrow is the Trash Pickup day!
          {% endif %}

    - service: script.voice_notify
      data_template:
        message: >
          {% if states.sensor.trash_and_recycle.state == "Put Trash Out" %}
            Attention!: Tomorrow is the Trash Pickup day.
            Please don't forget to leave Trash bins outside tonight!
          {% endif %}

- alias: Trash and Recycle Bin Left Outside Already
  initial_state: true
  trigger:
    platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: TRASH_LEFT
  action:
    - service: notify.ios_torn8o
      data:
        message: "Great job, Thank you!"
    - service: input_boolean.turn_off
      entity_id: input_boolean.trash_reminders

- alias: Remind later
  initial_state: true
  trigger:
    platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: TRASH_REMIND_LATER
  action:
    - service: notify.ios_torn8o
      data:
        message: "Will remind you again in an hour!"
    - service: input_boolean.turn_on
      entity_id: input_boolean.trash_reminders

- alias: Reset Trash Reminders
  initial_state: true
  trigger:
    - platform: time
      at: '09:00:00'
  action:
    - service: input_boolean.turn_on
      entity_id: input_boolean.trash_reminders
    - service: input_select.select_option
      data_template:
        entity_id: input_select.trash_pickup_day
        option: "{{states.sensor.trash_pickup_day.state}}"
    - service: input_select.select_option
      data_template:
        entity_id: input_select.recycle_pickup_day
        option: "{{states.sensor.recycle_pickup_day.state}}"
    - service: input_select.select_option
      data_template:
        entity_id: input_select.recycle_pickup_week
        option: "{{states.sensor.recycle_pickup_week.state}}"
#   alias: Trash - Enable trash Lighting
#   trigger:
#      - platform: state
#        entity_id: calendar.trash_and_recycle
#        to: 'on'
#        for:
#          hours: 9
#          minutes: 0
#          seconds: 0

#   condition:
#     condition: or
#     conditions:
#       - condition: state
#         entity_id: sensor.trash_and_recycle
#         state: 'Put Trash Out'

#   action:
#     - service: input_select.select_option
#       data:
#         entity_id: input_select.trash
#         option: 'Trash'

#  alias: light trash Reminder
#  initial_state: True
#  trigger:
#     - platform: time_pattern
#       at: '20:00:00'
#     - platform: time_pattern
#       at: '21:00:00'
#   condition:
#     condition: or
#     conditions:
#     - condition: state
#       entity_id: sensor.trash_and_recycle
#       state: 'Put Trash Out'
#   action:
#     - service: light.turn_on
#       entity_id: light.niche_leds
#       data:
#         transition: 900
#         brightness_pct: 100
#         color_name: purple
#         effect: Rainbow

#  alias: light recycle Reminder
#  initial_state: True
#  trigger:
#     - platform: time_pattern
#       at: '20:00:00'
#     - platform: time_pattern
#       at: '21:00:00'
#   condition:
#     condition: or
#     conditions:
#     - condition: state
#       entity_id: sensor.trash_and_recycle
#       state: 'Put Recycle Out'
#   action:
#     - service: light.turn_on
#       entity_id: light.niche_leds
#       data:
#         transition: 900
#         brightness_pct: 100
#         color_name: purple
#         effect: rainbow
- alias: tts garage door opened #creates the action button
  initial_state: True
  trigger:
    platform: state
    entity_id: sensor.garage_door_status
    from: 'Closed'
    to: 'Open'
  action:
    - service: media_player.alexa_tts
      data_template:
        entity_id: media_player.living_room, media_player.kitchen, media_player.game_room, media_player.master_bedroom
        message: "The Garage Door Has Been Opened"

- alias: tts garage door closed #creates the action button
  initial_state: True
  trigger:
    platform: state
    entity_id: sensor.garage_door_status
    from: 'Open'
    to: 'Closed'
  action:
    - service: media_player.alexa_tts
      data_template:
        entity_id: media_player.living_room, media_player.kitchen, media_player.game_room, media_player.master_bedroom
        message: "The Garage Door Has Been closed"

- alias: tts front eave lights #creates the action button
  initial_state: True
  trigger:
    platform: state
    entity_id: light.front_led
    from: 'off'
    to: 'on'
  action:
    - service: media_player.alexa_tts
      data_template:
        entity_id: media_player.living_room, media_player.kitchen, media_player.game_room, media_player.master_bedroom
        message: "Front   eave   lights   have   turned   on"

- alias: tts accent lights #creates the notification
  initial_state: True
  trigger:
    platform: state
    entity_id: light.accent_interior_lights
#    from: 'no motion'
    to: 'on'  #change this to actual trigger
  action:
    - service: media_player.alexa_tts
      data_template:
        entity_id: media_player.living_room, media_player.kitchen, media_player.game_room, media_player.master_bedroom
        message: "Accent Lights are now on"
##################################################################
## Holiday Automations
##################################################################

      ##########################################################
      ## Enable Christmas Lighting
      ##########################################################

- alias: Holiday - Enable Christmas Lighting
  trigger:
    - platform: state
      entity_id: calendar.charlie_brown
      to: 'on'
      for:
        hours: 9
        minutes: 0
        seconds: 0

  condition:
    condition: or
    conditions:
      - condition: state
        entity_id: sensor.charlie_calendar
        state: 'Christmas Eve'
      - condition: state
        entity_id: sensor.charlie_calendar
        state: 'Christmas Day'

  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.holiday
        option: 'Christmas'


      ##########################################################
      ## Christmas Lighting
      ##########################################################

- alias: Holiday - Christmas Lighting

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'
    - condition: state
      entity_id: input_select.holiday
      state: 'Christmas'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 900
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 900
        brightness_pct: 100
        color_name: red

        ##########################################################
        ## Christmas Lighting Rotate on the Hour
        ##########################################################

#- alias: Holiday - Christmas Lighting Rotate on the Hour

#  trigger:
#    platform: time_pattern
#    at: '00:30:00'


#  condition:
#    - condition: state
#      entity_id: sun.sun
#      state: 'below_horizon'
#    - condition: time_pattern
#      after: '15:00'
#      before: '23:59'
#    - condition: state
#      entity_id: input_select.holiday
#      state: 'Christmas'

#  action:
#    - service: light.turn_on
#      entity_id: light.niche_and_porch_lights
#      data:
##        brightness_pct: 100
  #      color_name: red
  #  - service: light.turn_on
  #    entity_id: light.front_led
  #    data:
  #      transition: 5
  #      brightness_pct: 100
  #      color_name: green

        ##########################################################
        ## Christmas Lighting Rotate 15 mins after the Hour
        ##########################################################

- alias: Holiday - Christmas Lighting Rotate 15 mins after the Hour

  trigger:
    platform: time_pattern
    minutes: "/15"

  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: time
      after: '15:00'
      before: '23:59'
    - condition: state
      entity_id: input_select.holiday
      state: 'Christmas'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 5
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 5
        brightness_pct: 100
        color_name: red

        ##########################################################
        ## Christmas Lighting Rotate 30 Mins after the Hour
        ##########################################################

- alias: Holiday - Christmas Lighting Rotate 30 Mins after the Hour

  trigger:
    platform: time_pattern
    minutes: "/30"

  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: time
      after: '15:00'
      before: '23:59'
    - condition: state
      entity_id: input_select.holiday
      state: 'Christmas'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 5
        brightness_pct: 100
        color_name: red
    #    rgb_color: [255, 0, 0]
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 5
        brightness_pct: 100
        color_name: green
    #    rgb_color: [0, 255, 0]

        ##########################################################
        ## Christmas Lighting Rotate 45 Mins After the Hour
        ##########################################################

- alias: Holiday - Christmas Lighting Rotate 45 Mins After the Hour

  trigger:
    platform: time_pattern
    minutes: "/45"

  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: time
      after: '15:00'
      before: '23:59'
    - condition: state
      entity_id: input_select.holiday
      state: 'Christmas'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 5
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 5
        brightness_pct: 100
        color_name: red

        ##########################################################
        ## Enable Halloween Lighting
        ##########################################################

- alias: Holiday - Enable Halloween Lighting

  trigger:
    - platform: state
      entity_id: calendar.charlie_brown
      to: 'on'
      for:
        hours: 9
        minutes: 0
        seconds: 0

  condition:
    - condition: state
      entity_id: sensor.charlie_calendar
      state: 'Halloween'

  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.holiday
        option: 'Halloween'

        ##########################################################
        ## Halloween Lighting
        ##########################################################

- alias: Holiday - Halloween Lighting

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'
    - condition: state
      entity_id: input_select.holiday
      state: 'Halloween'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 900
        brightness_pct: 100
        rgb_color: [255,85,7]
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 900
        brightness_pct: 100
        rgb_color: [160,6,255]

        ##########################################################
        ## Halloween Lighting Rotate on the Hour
        ##########################################################

- alias: Holiday - Halloween Lighting Rotate on the Hour

  trigger:
    platform: time_pattern
    minutes: "/15"

  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: time
      after: '15:00'
      before: '23:59'
    - condition: state
      entity_id: input_select.holiday
      state: 'Halloween'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 5
        brightness_pct: 100
        rgb_color: [160,6,255]
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 5
        brightness_pct: 100
        rgb_color: [255,85,7]

        ##########################################################
        ## Halloween Lighting Rotate 15 mins after the Hour
        ##########################################################

- alias: Holiday - Halloween Lighting Rotate 15 mins after the Hour

  trigger:
    platform: time_pattern
    minutes: "/30"

  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: time
      after: '15:00'
      before: '23:59'
    - condition: state
      entity_id: input_select.holiday
      state: 'Halloween'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 5
        brightness_pct: 100
        rgb_color: [255,85,7]
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 5
        brightness_pct: 100
        rgb_color: [160,6,255]

        ##########################################################
        ## Halloween Lighting Rotate 30 Mins after the Hour
        ##########################################################

- alias: Holiday - Halloween Lighting Rotate 30 Mins after the Hour

  trigger:
    platform: time_pattern
    minutes: "/45"

  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: time
      after: '15:00'
      before: '23:59'
    - condition: state
      entity_id: input_select.holiday
      state: 'Halloween'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 5
        brightness_pct: 100
        rgb_color: [160,6,255]
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 5
        brightness_pct: 100
        rgb_color: [255,85,7]

        ##########################################################
        ## Halloween Lighting Rotate 45 Mins After the Hour
        ##########################################################

- alias: Holiday - Halloween Lighting Rotate 45 Mins After the Hour

  trigger:
    platform: time_pattern
    minutes: "/45"

  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: time
      after: '15:00'
      before: '23:59'
    - condition: state
      entity_id: input_select.holiday
      state: 'Halloween'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 5
        brightness_pct: 100
        rgb_color: [255,85,7]
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 5
        brightness_pct: 100
        rgb_color: 152,39,25

        ##########################################################
        ## Enable St. Patricks Day Lighting
        ##########################################################

- alias: Holiday - Enable St. Patricks Day Lighting

  trigger:
    - platform: state
      entity_id: calendar.charlie_brown
      to: 'on'
      for:
        hours: 9
        minutes: 0
        seconds: 0

  condition:
    - condition: state
      entity_id: sensor.charlie_calendar
      state: "St. Patricks Day"

  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.holiday
        option: "St. Patricks Day"

        ##########################################################
        ## St. Patricks Day Lighting
        ##########################################################

- alias: Holiday - St. Patricks Day Lighting

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'
    - condition: state
      entity_id: input_select.holiday
      state: "St. Patrick's Day"

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 900
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 900
        brightness_pct: 100
        color_name: green

        ##########################################################
        ## Enable Valentine's Day Lighting
        ##########################################################

- alias: Holiday - Enable Valentine's Day Lighting

  trigger:
    - platform: state
      entity_id: calendar.charlie_brown
      to: 'on'
      for:
        hours: 9
        minutes: 0
        seconds: 0

  condition:
    - condition: state
      entity_id: sensor.charlie_calendar
      state: "Valentine's Day"

  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.holiday
        option: "Valentine's Day"

        ##########################################################
        ## Valentine's Day Lighting
        ##########################################################

- alias: Holiday - Valentine's Day Lighting

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'
    - condition: state
      entity_id: input_select.holiday
      state: "Valentine's Day"

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 900
        brightness_pct: 100
        color_name: "deeppink"
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 900
        brightness_pct: 100
        color_name: "deeppink"

        ##########################################################
        ## Cardinals Game Lighting
        ##########################################################

- alias: Holiday - Cardinals Game Lighting

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'
    - condition: state
      entity_id: input_select.holiday
      state: 'Cardinals Game'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 900
        brightness_pct: 100
        color_name: red
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 900
        brightness_pct: 100
        color_name: red

        ##########################################################
        ## Blues Game Lighting
        ##########################################################

- alias: Holiday - Blues Game Lighting

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'
    - condition: state
      entity_id: input_select.holiday
      state: 'Blues Game'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 900
        brightness_pct: 100
        color_name: blue
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 900
        brightness_pct: 100
        color_name: blue

        ##########################################################
        ## Enable Easter Lighting
        ##########################################################

- alias: Holiday - Enable Easter Lighting

  trigger:
    - platform: state
      entity_id: calendar.charlie_brown
      to: 'on'
      for:
        hours: 9
        minutes: 0
        seconds: 0

  condition:
    - condition: state
      entity_id: sensor.charlie_calendar
      state: "Easter Sunday"

  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.holiday
        option: 'Easter'

        ##########################################################
        ## Easter Lighting
        ##########################################################

- alias: Holiday - Easter Lighting

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'
    - condition: state
      entity_id: input_select.holiday
      state: 'Easter'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 900
        brightness_pct: 100
        color_name: "indigo"
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 900
        brightness_pct: 100
        color_name: "tomato"

        ##########################################################
        ## Enable Thanksgiving Lighting
        ##########################################################

- alias: Holiday - Enable Thanksgiving Lighting

  trigger:
    - platform: state
      entity_id: calendar.charlie_brown
      to: 'on'
      for:
        hours: 9
        minutes: 0
        seconds: 0

  condition:
    - condition: state
      entity_id: sensor.charlie_calendar
      state: "Thanksgiving Day"

  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.holiday
        option: 'Thanksgiving'


        ##########################################################
        ## Thanksgiving Lighting
        ##########################################################

- alias: Holiday - Thanksgiving Lighting

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'
    - condition: state
      entity_id: input_select.holiday
      state: 'Thanksgiving'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 900
        brightness_pct: 100
        color_name: "darkorange"
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 900
        brightness_pct: 100
        color_name: "yellow"

        ##########################################################
        ## Enable Independence Day Lighting
        ##########################################################

- alias: Holiday - Enable Independence Day Lighting

  trigger:
    - platform: state
      entity_id: calendar.charlie_brown
      to: 'on'
      for:
        hours: 9
        minutes: 0
        seconds: 0

  condition:
    - condition: state
      entity_id: sensor.charlie_calendar
      state: "Independence Day"

  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.holiday
        option: 'Independence Day'

        ##########################################################
        ## Enable Memorial Day Lighting
        ##########################################################

- alias: Holiday - Enable Memorial Day Lighting

  trigger:
    - platform: state
      entity_id: calendar.charlie_brown
      to: 'on'
      for:
        hours: 9
        minutes: 0
        seconds: 0

  condition:
    - condition: state
      entity_id: sensor.charlie_calendar
      state: "Memorial Day"

  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.holiday
        option: 'Memorial Day'

        ##########################################################
        ## Enable Veterans Day Lighting
        ##########################################################

- alias: Holiday - Enable Veterans Day Lighting

  trigger:
    - platform: state
      entity_id: calendar.charlie_brown
      to: 'on'
      for:
        hours: 9
        minutes: 0
        seconds: 0

  condition:
    - condition: state
      entity_id: sensor.charlie_calendar
      state: "Veterans Day"

  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.holiday
        option: 'Veterans Day'

        ##########################################################
        ## Enable Labor Day Lighting
        ##########################################################

- alias: Holiday - Enable Labor Day Lighting

  trigger:
    - platform: state
      entity_id: calendar.charlie_brown
      to: 'on'
      for:
        hours: 9
        minutes: 0
        seconds: 0

  condition:
    - condition: state
      entity_id: sensor.charlie_calendar
      state: "Labor Day"

  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.holiday
        option: 'Labor Day'

        ##########################################################
        ## Independence / Memorial / Veterans / Labor Day Lighting
        ##########################################################

- alias: Holiday - Independence / Memorial / Veterans / Labor Day Lighting

  trigger:
    - platform: sun
      event: 'sunset'
      offset: '-00:15:00'

  condition:
    condition: or
    conditions:
      - condition: state
        entity_id: input_select.holiday
        state: 'Labor Day'
      - condition: state
        entity_id: input_select.holiday
        state: 'Memorial Day'
      - condition: state
        entity_id: input_select.holiday
        state: 'Independence Day'
      - condition: state
        entity_id: input_select.holiday
        state: 'Veterans Day'

  action:
    - service: light.turn_on
      entity_id: light.niche_and_porch_lights
      data:
        transition: 900
        brightness_pct: 100
        color_name: blue
    - service: light.turn_on
      entity_id: light.front_led
      data:
        transition: 900
        brightness_pct: 100
        color_name: red

        ##########################################################
        ## Christmas Lighting Interior
        ##########################################################

- alias: Holiday - Christmas Lighting Interior

  trigger:
    - platform: state
      entity_id: input_boolean.interior_holiday
      from: 'off'
      to: 'on'

  condition:
    - condition: state
      entity_id: input_select.holiday
      state: 'Christmas'

  action:
    - service: light.turn_on
      entity_id: light.living_room_lamp_1
      data:
        transition: 60
        brightness_pct: 100
        color_name: red
    - service: light.turn_on
      entity_id: light.living_room_lamp_2
      data:
        transition: 5
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.bedroom_lamp
      data:
        transition: 5
        brightness_pct: 100
        color_name: red
    - service: light.turn_on
      entity_id: light.media_center_lighting
      data:
        transition: 5
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.globe
      data:
        transition: 5
        brightness_pct: 100
        color_name: green

        ##########################################################
        ## Christmas Lighting Rotate Hour Interior
        ##########################################################

- alias: Holiday - Christmas Lighting Rotate Hour Interior

  trigger:
    platform: time_pattern
    minutes: "/15"

  condition:
    - condition: state
      entity_id: input_select.holiday
      state: 'Christmas'
    - condition: state
      entity_id: input_boolean.interior_holiday
      state: 'on'

  action:
    - service: light.turn_on
      entity_id: light.living_room_lamp_1
      data:
        transition: 5
        brightness_pct: 100
        color_name: red
    - service: light.turn_on
      entity_id: light.living_room_lamp_2
      data:
        transition: 5
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.bedroom_lamp
      data:
        transition: 5
        brightness_pct: 100
        color_name: red
    - service: light.turn_on
      entity_id: light.media_center_lighting
      data:
        transition: 5
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.globe
      data:
        transition: 5
        brightness_pct: 100
        color_name: green

        ##########################################################
        ## Christmas Lighting Rotate 30 Min Interior
        ##########################################################

- alias: Holiday - Christmas Lighting Rotate 30 Min Interior

  trigger:
    platform: time_pattern
    minutes: "/30"

  condition:
    - condition: state
      entity_id: input_select.holiday
      state: 'Christmas'
    - condition: state
      entity_id: input_boolean.interior_holiday
      state: 'on'

  action:
    - service: light.turn_on
      entity_id: light.living_room_lamp_1
      data:
        transition: 5
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.living_room_lamp_2
      data:
        transition: 5
        brightness_pct: 100
        color_name: red
    - service: light.turn_on
      entity_id: light.bedroom_lamp
      data:
        transition: 5
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.media_center_lighting
      data:
        transition: 5
        brightness_pct: 100
        color_name: red
    - service: light.turn_on
      entity_id: light.globe
      data:
        transition: 5
        brightness_pct: 100
        color_name: red

        ##########################################################
        ## Halloween Lighting Interior
        ##########################################################

- alias: Holiday - Halloween Lighting Interior

  trigger:
    - platform: state
      entity_id: input_boolean.interior_holiday
      from: 'off'
      to: 'on'

  condition:
    - condition: state
      entity_id: input_select.holiday
      state: 'Halloween'

  action:
    - service: light.turn_on
      entity_id: light.living_room_lamp_1
      data:
        transition: 5
        brightness_pct: 100
        rgb_color: [255,85,7]
    - service: light.turn_on
      entity_id: light.living_room_lamp_2
      data:
        transition: 5
        brightness_pct: 100
        rgb_color: [255,85,7]
    - service: light.turn_on
      entity_id: light.bedroom_lamp
      data:
        transition: 5
        brightness_pct: 100
        rgb_color: [255,85,7]
    - service: light.turn_on
      entity_id: light.media_center_lighting
      data:
        transition: 5
        brightness_pct: 100
        rgb_color: 152,39,25
    - service: light.turn_on
      entity_id: light.globe
      data:
        transition: 5
        brightness_pct: 100
        rgb_color: 152,39,25

        ##########################################################
        ## St. Patricks Day Lighting Interior
        ##########################################################

- alias: Holiday - St. Patricks Day Lighting Interior

  trigger:
    - platform: state
      entity_id: input_boolean.interior_holiday
      from: 'off'
      to: 'on'

  condition:
    - condition: state
      entity_id: input_select.holiday
      state: "St. Patrick's Day"

  action:
    - service: light.turn_on
      entity_id: light.living_room_lamp_1
      data:
        transition: 5
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.living_room_lamp_2
      data:
        transition: 5
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.bedroom_lamp
      data:
        transition: 5
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.media_center_lighting
      data:
        transition: 5
        brightness_pct: 100
        color_name: green
    - service: light.turn_on
      entity_id: light.globe
      data:
        transition: 5
        brightness_pct: 100
        color_name: green

        ##########################################################
        ## Valentine's Day Lighting Interior
        ##########################################################

- alias: Holiday - Valentine's Day Lighting Interior

  trigger:
    - platform: state
      entity_id: input_boolean.interior_holiday
      from: 'off'
      to: 'on'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'
    - condition: state
      entity_id: input_select.holiday
      state: "Valentine's Day"

  action:
    - service: light.turn_on
      entity_id: light.living_room_lamp_1
      data:
        transition: 5
        brightness_pct: 100
        color_name: "deeppink"
    - service: light.turn_on
      entity_id: light.living_room_lamp_2
      data:
        transition: 5
        brightness_pct: 100
        color_name: "deeppink"
    - service: light.turn_on
      entity_id: light.bedroom_lamp
      data:
        transition: 5
        brightness_pct: 100
        color_name: "deeppink"
    - service: light.turn_on
      entity_id: light.media_center_lighting
      data:
        transition: 5
        brightness_pct: 100
        color_name: "deeppink"
    - service: light.turn_on
      entity_id: light.globe
      data:
        transition: 5
        brightness_pct: 100
        color_name: "deeppink"

        ##########################################################
        ## Cardinals Game Lighting Interior
        ##########################################################

- alias: Holiday - Cardinals Game Lighting Interior

  trigger:
    - platform: state
      entity_id: input_boolean.interior_holiday
      from: 'off'
      to: 'on'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'
    - condition: state
      entity_id: input_select.holiday
      state: 'Cardinals Game'

  action:
    - service: light.turn_on
      entity_id: light.living_room_lamp_1
      data:
        transition: 5
        brightness_pct: 100
        color_name: red
    - service: light.turn_on
      entity_id: light.living_room_lamp_2
      data:
        transition: 5
        brightness_pct: 100
        color_name: red
    - service: light.turn_on
      entity_id: light.bedroom_lamp
      data:
        transition: 5
        brightness_pct: 100
        color_name: red
    - service: light.turn_on
      entity_id: light.media_center_lighting
      data:
        transition: 5
        brightness_pct: 100
        color_name: red
    - service: light.turn_on
      entity_id: light.globe
      data:
        transition: 5
        brightness_pct: 100
        color_name: red

        ##########################################################
        ## Blues Game Lighting Interior
        ##########################################################

- alias: Holiday - Blues Game Lighting Interior

  trigger:
    - platform: state
      entity_id: input_boolean.interior_holiday
      from: 'off'
      to: 'on'

  condition:
    - condition: state
      entity_id: input_boolean.disable_exterior_on_sunset
      state: 'off'
    - condition: state
      entity_id: input_select.holiday
      state: 'Blues Game'

  action:
    - service: light.turn_on
      entity_id: light.living_room_lamp_1
      data:
        transition: 5
        brightness_pct: 100
        color_name: blue
    - service: light.turn_on
      entity_id: light.living_room_lamp_2
      data:
        transition: 5
        brightness_pct: 100
        color_name: blue
    - service: light.turn_on
      entity_id: light.bedroom_lamp
      data:
        transition: 5
        brightness_pct: 100
        color_name: blue
    - service: light.turn_on
      entity_id: light.media_center_lighting
      data:
        transition: 5
        brightness_pct: 100
        color_name: blue
    - service: light.turn_on
      entity_id: light.globe
      data:
        transition: 5
        brightness_pct: 100
        color_name: blue

        ##########################################################
        ## Easter Lighting Interior
        ##########################################################

- alias: Holiday - Easter Lighting Interior

  trigger:
    - platform: state
      entity_id: input_boolean.interior_holiday
      from: 'off'
      to: 'on'

  condition:
    - condition: state
      entity_id: input_select.holiday
      state: 'Easter'

  action:
    - service: light.turn_on
      entity_id: light.living_room_lamp_1
      data:
        transition: 5
        brightness_pct: 100
        color_name: "indigo"
    - service: light.turn_on
      entity_id: light.living_room_lamp_2
      data:
        transition: 5
        brightness_pct: 100
        color_name: "tomato"
    - service: light.turn_on
      entity_id: light.bedroom_lamp
      data:
        transition: 5
        brightness_pct: 100
        color_name: "indigo"
    - service: light.turn_on
      entity_id: light.media_center_lighting
      data:
        transition: 5
        brightness_pct: 100
        color_name: "tomato"
    - service: light.turn_on
      entity_id: light.globe
      data:
        transition: 5
        brightness_pct: 100
        color_name: "tomato"

        ##########################################################
        ## Thanksgiving Lighting Interior
        ##########################################################

- alias: Holiday - Thanksgiving Lighting Interior

  trigger:
    - platform: state
      entity_id: input_boolean.interior_holiday
      from: 'off'
      to: 'on'

  condition:
    - condition: state
      entity_id: input_select.holiday
      state: 'Thanksgiving'

  action:
    - service: light.turn_on
      entity_id: light.living_room_lamp_1
      data:
        transition: 5
        brightness_pct: 100
        color_name: "darkorange"
    - service: light.turn_on
      entity_id: light.living_room_lamp_2
      data:
        transition: 5
        brightness_pct: 100
        color_name: "yellow"
    - service: light.turn_on
      entity_id: light.bedroom_lamp
      data:
        transition: 5
        brightness_pct: 100
        color_name: "darkorange"
    - service: light.turn_on
      entity_id: light.media_center_lighting
      data:
        transition: 5
        brightness_pct: 100
        color_name: "yellow"
    - service: light.turn_on
      entity_id: light.globe
      data:
        transition: 5
        brightness_pct: 100
        color_name: "yellow"

        ##########################################################
        ## Independence / Memorial / Veterans / Labor Day Lighting Interior
        ##########################################################

- alias: Holiday - Independence / Memorial / Veterans / Labor Day Lighting Interior

  trigger:
    - platform: state
      entity_id: input_boolean.interior_holiday
      from: 'off'
      to: 'on'

  condition:
    condition: or
    conditions:
      - condition: state
        entity_id: input_select.holiday
        state: 'Labor Day'
      - condition: state
        entity_id: input_select.holiday
        state: 'Memorial Day'
      - condition: state
        entity_id: input_select.holiday
        state: 'Independence Day'
      - condition: state
        entity_id: input_select.holiday
        state: 'Veterans Day'

  action:
    - service: light.turn_on
      entity_id: light.living_room_lamp_1
      data:
        transition: 5
        brightness_pct: 100
        color_name: blue
    - service: light.turn_on
      entity_id: light.living_room_lamp_2
      data:
        transition: 5
        brightness_pct: 100
        color_name: red
    - service: light.turn_on
      entity_id: light.bedroom_lamp
      data:
        transition: 5
        brightness_pct: 100
        color_name: red
    - service: light.turn_on
      entity_id: light.media_center_lighting
      data:
        transition: 5
        brightness_pct: 100
        color_name: blue
    - service: light.turn_on
      entity_id: light.globe
      data:
        transition: 5
        brightness_pct: 100
        color_name: blue

        ##########################################################
        ## Turn Off Holiday Lighting at 2:00 am
        ##########################################################

- alias: Holiday - Turn Off Lighting at at 2a

  trigger:
    - platform: time
      at: '01:55:00'

  condition:
    condition: or
    conditions:
      - condition: state
        entity_id: input_select.holiday
        state: 'Christmas'
      - condition: state
        entity_id: input_select.holiday
        state: 'Halloween'
      - condition: state
        entity_id: input_select.holiday
        state: "St. Patrick's Day"
      - condition: state
        entity_id: input_select.holiday
        state: 'Easter'
      - condition: state
        entity_id: input_select.holiday
        state: "Valentine's Day"
      - condition: state
        entity_id: input_select.holiday
        state: 'Thanksgiving'
      - condition: state
        entity_id: input_select.holiday
        state: 'Labor Day'
      - condition: state
        entity_id: input_select.holiday
        state: 'Memorial Day'
      - condition: state
        entity_id: input_select.holiday
        state: 'Independence Day'
      - condition: state
        entity_id: input_select.holiday
        state: 'Cardinals Game'
      - condition: state
        entity_id: input_select.holiday
        state: 'Blues Game'
      - condition: state
        entity_id: input_select.holiday
        state: 'Veterans Day'

  action:
    - service: light.turn_off
      entity_id: light.front_porch
      data:
        transition: 300

        ##########################################################
        ## Reset Holiday Lighting at 4a
        ##########################################################

- alias: Holiday - Reset Lighting at 4a

  trigger:
    - platform: time
      at: '04:00:00'

  condition:
    condition: or
    conditions:
      - condition: state
        entity_id: input_select.holiday
        state: "St. Patrick's Day"
      - condition: state
        entity_id: input_select.holiday
        state: 'Easter'
      - condition: state
        entity_id: input_select.holiday
        state: "Valentine's Day"
      - condition: state
        entity_id: input_select.holiday
        state: 'Thanksgiving'
      - condition: state
        entity_id: input_select.holiday
        state: 'Labor Day'
      - condition: state
        entity_id: input_select.holiday
        state: 'Memorial Day'
      - condition: state
        entity_id: input_select.holiday
        state: 'Independence Day'
      - condition: state
        entity_id: input_select.holiday
        state: 'Veterans Day'
      - condition: state
        entity_id: input_select.holiday
        state: 'Cardinals Game'
      - condition: state
        entity_id: input_select.holiday
        state: 'Blues Game'

  action:
    - service: input_select.select_option
      data:
        entity_id: input_select.holiday
        option: "None"
    - service: homeassistant.turn_off
      entity_id: input_boolean.interior_holiday

#automation:
- alias: Save sensor mqtt State
  initial_state: True
  hide_entity: true
  trigger:
    platform: state
    entity_id: switch.switch_one, switch.switch_two, switch.switch_three, switch.switch_four, switch.switch_five
  action:
    service: mqtt.publish
    data_template:
      topic: "/home/rfswitches/{{ trigger.entity_id.split('.')[1] }}"
      retain: true
      qos: 1
      payload: '{{ trigger.to_state.state }}'
######################################################################
##  Dark House Little extra light - DARK and Cloudy or just rainy.
######################################################################

- alias: 'Dark outside light'
  initial_state: True
  trigger:
  #  - platform: numeric_state
  #    entity_id: sun.sun
  #    value_template: '{{ state.attributes.elevation }}'
  #    below: 20.0
    - platform: numeric_state
      entity_id: sensor.dark_sky_cloud_coverage
      above: 80
  #  - platform: numeric_state
  #    entity_id: sensor.dark_sky_precip_intensity
  #    above: 1

  condition:
  #  condition: and
  #  conditions:
  #    - condition: or
  #      conditions:
  #        - condition: and
  #          conditions:
  #            - condition: numeric_state
  #              entity_id: sun.sun
  #              value_template: '{{ state.attributes.elevation }}'
  #              below: 20.0
              - condition: numeric_state
                entity_id: sensor.dark_sky_cloud_coverage
                above: 80
  #        - condition: numeric_state
  #          entity_id: sensor.dark_sky_precip_intensity
  #          above: 1
  #    - condition: state
  #      entity_id: sun.sun
  #      state: 'above_horizon'

  action:
    - service: switch.turn_on
      entity_id:
#        - switch.front_lights_switch_28_0
        - light.front_entry_level


######################################################################
- alias: fan_speed_selected
  initial_state: True
  trigger:
    - platform: state
      entity_id: input_select.fan_speed
  condition:
    - condition: template
      value_template: "{{ trigger.to_state.state != 'Select an option...' }}"
  action:
    # Turn on the wall switch to make sure it receives the command
    - service: switch.turn_on
      data:
        entity_id: switch.tv_room_fan
    - delay: '00:00:05'
    # Turn the corresponding switch on to send the fan speed command
    - service: switch.turn_on
      data_template:
        entity_id: "switch.fan_speed_{{ trigger.to_state.state|lower|replace(' ', '_') }}"
    # Reset the Input Select to "Select an option..."
    - service: input_select.select_option
      data_template:
        entity_id: "{{ trigger.to_state.entity_id }}"
        option: Select an option...
    # Condition to check to see if the "Off" option was selected
    - condition: template
      value_template: "{{ trigger.to_state.state == 'Off' }}"
    # If the above condition is true, turn the wall switch off
    - service: switch.turn_off
      data:
        entity_id: switch.tv_room_fan
- alias: View lights
  initial_state: True
#  automation 2:
  trigger:
    platform: sun
    event: sunrise
  action:
    service: group.set_visibility
    entity_id: group.lights1
    data:
      visible: True
- alias: Pool Door Lights
  initial_state: True
  trigger:
    - platform: state
      entity_id: binary_sensor.pool_door_sensor_sensor
      to: 'on'
  action:
    - service: switch.turn_on
      entity_id: switch.master_bathroom_light_switch, switch.master_bedroom_h_switch
    - delay:
        minutes: 10
    - service: switch.turn_off
      entity_id: switch.master_bathroom_light_switch, switch.master_bedroom_h_switch
  #  automation:
- alias: Bathroom heater on
  initial_state: True
  trigger:
    - platform: numeric_state
      entity_id:  sensor.aeotec_zw100_multisensor_6_temperature_4
      below: 74
  action:
    - service: switch.turn_on
      data:
        entity_id: switch.master_bedroom_h_switch
- alias: Bathroom heater off
  initial_state: True
  trigger:
    - platform: numeric_state
      entity_id:  sensor.aeotec_zw100_multisensor_6_temperature_4
      above: 74
  action:
    - service: switch.turn_off
      data:
        entity_id: switch.master_bedroom_h_switch

- alias: attic fan_control_on_with_temp
  initial_state: True
  trigger:
    - platform: numeric_state
      entity_id: sensor.attic_real_feel
      above: 100
  action:
    - service: switch.turn_on
      data:
        entity_id: switch.attic_fans

- alias: attic fan_control_off_with_temp
  initial_state: True
  trigger:
    - platform: numeric_state
      entity_id: sensor.attic_real_feel
      below: 95
  action:
    - service: switch.turn_off
      data:
        entity_id: switch.attic_fans

# gameroom fan
- alias: game fan_control_on_with_temp
  initial_state: True
  trigger:
    - platform: numeric_state
      entity_id: sensor.game_temperature
      above: 74.1
  action:
    - service: switch.turn_on
      data:
        entity_id: switch.game_room_fan

- alias: game fan_control_off_with_temp
  initial_state: True
  trigger:
    - platform: numeric_state
      entity_id: sensor.game_temperature
      below: 74
  action:
    - service: switch.turn_off
      data:
        entity_id: switch.game_room_fan
#tv room fan
- alias: tv_fan_control_on_with_temp
  initial_state: False
  trigger:
    - platform: numeric_state
      entity_id: sensor.broadlink_torn_temperature
      above: 74
  action:
    - service: switch.turn_on
      data:
        entity_id: switch.tv_room_fan


- alias: tv_fan_control_off_with_temp
  initial_state: False
  trigger:
    - platform: numeric_state
      entity_id: sensor.broadlink_torn_temperature
      below: 74
  action:
    - service: switch.turn_off
      data:
        entity_id: switch.receiver
#tv room fan speed
- alias: tv_fan_speed_on_low
  initial_state: False
  trigger:
    - platform: numeric_state
      entity_id: sensor.broadlink_torn_temperature
      above: 74.1
  action:
    - service: switch.turn_on
      data:
        entity_id: switch.fan_speed_low

- alias: tv_fan_speed_on_medium
  initial_state: False
  trigger:
    - platform: numeric_state
      entity_id: sensor.broadlink_torn_temperature
      above: 75.1
  action:
    - service: switch.turn_on
      data:
        entity_id: switch.fan_speed_medium

- alias: tv_fan_speed_on_high
  initial_state: False
  trigger:
    - platform: numeric_state
      entity_id: sensor.broadlink_torn_temperature
      above: 76.1
  action:
    - service: switch.turn_on
      data:
        entity_id: switch.fan_speed_high

- alias: fan off ac on
  initial_state: True
  trigger:
    platform: state
    entity_id: sensor.hallway_thermostat_hvac_state
    to: 'cooling'
  action:
    - service: switch.turn_on
      data:
        entity_id: switch.fan_speed_low

- alias: fan on ac off
  initial_state: True
  trigger:
    platform: state
    entity_id: sensor.hallway_thermostat_hvac_state
    to: 'off'
  action:
    - service: switch.turn_on
      data:
        entity_id: switch.tv_room_fan
#master fan
- alias: mb_fan_control_on_with_temp
  initial_state: True
  trigger:
    - platform: numeric_state
      entity_id: sensor.master_bed_temperature
      above: 74.1
  action:
    - service: light.turn_on
      data:
        entity_id: light.master_bedroom_fan_level
        brightness: 255


- alias: mb_fan_control_off_with_temp
  initial_state: True
  trigger:
    - platform: numeric_state
      entity_id: sensor.master_bed_temperature
      below: 74
  action:
    - service: light.turn_off
      data:
        entity_id: light.master_bedroom_fan_level
# car sensor is connected and the garage door is closed


- alias: CarPresence_ON
  initial_state: True
  trigger:
    platform: state
    entity_id: binary_sensor.carpresence
    to: 'on'
  condition:
  - condition: state
    entity_id: 'sensor.garage_door_status'
    state: 'Closed'
  action:
  - service: switch.turn_on
    entity_id: 'switch.garage_door_opener_switch'

# car sensor is disconnected for one minute and the garage door is open
- alias: CarPresence_OFF
  initial_state: True
  trigger:
    platform: state
    entity_id: binary_sensor.carpresence
    to: 'off'
    for:
      minutes: 1
  condition:
  - condition: state
    entity_id: 'sensor.garage_door_status'
    state: 'Open'
  action:
  - service: switch.turn_on
    entity_id: 'switch.garage_door_opener_switch'
- alias: open curtains 9am
  initial_state: True
  hide_entity: false
  trigger:
    - platform: time
      at: '09:00:00'
  action:
    service: switch.turn_on
    entity_id: switch.curtain_open
#- alias: curtain open
#  trigger:
#    platform: time_pattern_pattern
#    seconds: '/15'
#  condition:
#    - condition: state
#      entity_id: switch.receiver5
#      state: "on"
#  action:
#    - service: switch.turn_on
#      data:
#        entity_id: switch.receiver5
- alias: close curtains sunset
  initial_state: True
  hide_entity: false
  trigger:
    platform: sun
    event: sunset
  action:
    service: switch.turn_on
    entity_id: switch.curtain_close

- alias: curtain reset open
  initial_state: True
  trigger:
    platform: time_pattern
    seconds: "/05"
  condition:
    - condition: state
      entity_id: switch.curtain_open
      state: "on"
  action:
    - service: switch.turn_off
      data:
        entity_id: switch.curtain_open

- alias: curtain reset close
  initial_state: True
  trigger:
    platform: time_pattern
    seconds: "/05"
  condition:
    - condition: state
      entity_id: switch.curtain_close
      state: "on"
  action:
    - service: switch.turn_off
      data:
        entity_id: switch.curtain_close
